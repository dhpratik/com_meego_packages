version: 0.0.2

requires:
    com_meego_obsconnector:
        - {type: github, user: nemein, repository: com_meego_obsconnector, branch: master}
    midgardmvc_helper_workflow:
        - {type: github, user: bergie, repository: midgardmvc_helper_workflow, branch: master}
    midgardmvc_ui_forms:
        - {type: github, user: bergie, repository: midgardmvc_ui_forms, branch: master}

routes:
    index:
        path: /
        controller: com_meego_packages_controllers_repository
        action: redirect

    # lists all package categories (for now)
    # @todo: it should probably list only base categories later
    categories:
        path: /categories
        controller: com_meego_packages_controllers_category
        action: categories_list
        template_aliases:
            content: cmp-show-categories-list

    # admin UI for base categories
    # meant only for managing base categories
    # and their mappings to real package categories
    basecategories_admin_index:
        path: /basecategories/admin
        controller: com_meego_packages_controllers_basecategory
        action: admin_index
        template_aliases:
            content: cmp-admin-index-basecategories

    basecategories_create:
        path: /basecategories/create/
        controller: com_meego_packages_controllers_basecategory
        action: create_basecategory
        template_aliases:
            content: cmp-create-update-basecategory

    basecategories_read:
        path: /basecategories/read/{$basecategory}
        controller: com_meego_packages_controllers_basecategory
        action: read_basecategory
        template_aliases:
            content: cmp-read-basecategory

    basecategories_update:
        path: /basecategories/update/{$basecategory}
        controller: com_meego_packages_controllers_basecategory
        action: update_basecategory
        template_aliases:
            content: cmp-create-update-basecategory

    basecategories_delete:
        path: /basecategories/delete/{$basecategory}
        controller: com_meego_packages_controllers_basecategory
        action: delete_basecategory
        template_aliases:
            content: cmp-delete-basecategory

    repositories:
        path: /repositories
        controller: com_meego_packages_controllers_repository
        action: index
        template_aliases:
            content: cmp-show-index

    repositories_os_version_ux:
        path: /repositories/{$os}/{$version}/{$ux}
        controller: com_meego_packages_controllers_repository
        action: repositories_list
        template_aliases:
            content: cmp-show-repositories-list

    repository:
        path: /repository/{$project}/{$repository}/{$arch}
        controller: com_meego_packages_controllers_repository
        action: repository
        template_aliases:
            content: cmp-show-repository

    repository_latest:
        path: /repository/{$project}/{$repository}/{$arch}/latest
        controller: com_meego_packages_controllers_repository
        action: repository_latest
        template_aliases:
            content: cmp-show-repository-latest

    repository_latest_amount:
        path: /repository/{$project}/{$repository}/{$arch}/latest/{$amount}
        controller: com_meego_packages_controllers_repository
        action: repository_latest
        template_aliases:
            content: cmp-show-repository-latest

    search:
        path: /search
        controller: com_meego_packages_controllers_package
        action: search
        template_aliases:
            content: cmp-show-search

    # category tree is coming from the packages itself.
    # it is a : separated list, such as Amusements:Games, Development:Libraries
    packages_by_categorytree:
        path: /packages/tree/{$categorytree}
        controller: com_meego_packages_controllers_package
        action: packages_by_categorytree
        template_aliases:
            content: cmp-show-packages-list

    # to give an overview of a package by listing all
    # the comments / ratings that each of its variants received
    package_overview:
        path: /packages/tree/{$categorytree}/{$packagetitle}
        controller: com_meego_packages_controllers_package
        action: package_overview
        template_aliases:
            content: cmp-show-package-overview

    # display a uniquely identified package
    package:
        path: /package/{$package}
        controller: com_meego_packages_controllers_package
        action: package
        template_aliases:
            content: cmp-show-package

    package_repository:
        path: /package/{$package}/{$repository}
        controller: com_meego_packages_controllers_package
        action: repository
        template_aliases:
            content: cmp-show-package_repository

    package_instance:
        path: /package/{$package}/{$version}/{$project}/{$repository}/{$arch}
        controller: com_meego_packages_controllers_package
        action: instance
        template_aliases:
            content: cmp-show-package_instance

    package_instance_workflow_start:
        path: /package/{$package}/{$version}/{$project}/{$repository}/{$arch}/workflow/{$workflow}
        controller: com_meego_packages_controllers_workflow
        action: start_package_instance
        template_aliases:
            content: cmp-show-package_instance_workflow

    package_instance_workflow_resume:
        path: /package/{$package}/{$version}/{$project}/{$repository}/{$arch}/workflow/{$workflow}/{$execution}
        controller: com_meego_packages_controllers_workflow
        action: resume_package_instance
        template_aliases:
            content: cmp-show-package_instance_workflow